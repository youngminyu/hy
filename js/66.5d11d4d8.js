"use strict";(self["webpackChunkins"]=self["webpackChunkins"]||[]).push([[66],{6834:function(e,a,t){t.d(a,{Z:function(){return H}});var s=t(4562),l=t(5039),o=t(4324),i=t(7808),n=function(){var e=this,a=e._self._c;return a("div",{staticClass:"component"},[a("div",{staticClass:"box"},[a("SelectDialog",{attrs:{payload:e.selectPayload}}),a("div",{staticClass:"col"},[a("div",{staticClass:"box rowBox"},[a("div",{staticClass:"hyTitle"},[e._v(e._s(e.masterName))]),a("div",{staticClass:"spacer"}),a(i.Z,{attrs:{"append-icon":"mdi-magnify",label:"검색","single-line":"","hide-details":""},model:{value:e.masterTableSearch,callback:function(a){e.masterTableSearch=a},expression:"masterTableSearch"}})],1),a("div",{staticClass:"box"},[a(l.Z,{staticClass:"selectTable",attrs:{"fixed-header":"","single-select":!0,search:e.masterTableSearch,headers:e.masterHeaders,items:e.masterTableList,"items-per-page":-1,"item-key":e.masterTableKey},on:{"click:row":e.selectTableItem},scopedSlots:e._u([{key:"item.no",fn:function({index:a}){return[e._v(" "+e._s(a+1)+" ")]}},{key:"item.icon",fn:function({}){return[a(o.Z,{staticClass:"mr-2",attrs:{small:""}},[e._v(" mdi-arrow-right-bold ")])]}}],null,!0)})],1)]),null!==e.refItem?a("div",{staticClass:"col",staticStyle:{"min-width":"50%"}},[a("div",{staticClass:"box rowBox"},[a("div",{staticClass:"hyTitle"},[e._v(e._s(e.secoundName))]),a(s.Z,{attrs:{color:"primary",dark:""},on:{click:function(a){return e.selectItem(e.secoundName,e.secoundHeaders,e.secoundTableList)}}},[e._v(" Select Item ")]),a("div",{staticClass:"spacer"}),a(i.Z,{attrs:{"append-icon":"mdi-magnify",label:"검색","single-line":"","hide-details":""},model:{value:e.secoundTableSearch,callback:function(a){e.secoundTableSearch=a},expression:"secoundTableSearch"}})],1),a("div",{staticClass:"box"},[a(l.Z,{attrs:{"fixed-header":"",search:e.secoundTableSearch,headers:e.secoundHeaders,items:e.secoundTableList,"items-per-page":-1,"item-key":e.secoundTableKey},scopedSlots:e._u([{key:"item.no",fn:function({index:a}){return[e._v(" "+e._s(a+1)+" ")]}}],null,!0)})],1)]):e._e()],1)])},c=[],r=t(144),d=t(5266),u=t(9582),m=t(4886),p=t(4061),v=t(3424),y=t(3687),b=function(){var e=this,a=e._self._c;return a(p.Z,{attrs:{"max-width":"1000px"},model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[a(u.Z,{staticClass:"full"},[a(m.EB,[a("span",{staticClass:"text-h6"},[e._v(e._s(e.title)+" 선택")])]),a("div",{staticClass:"container"},[a(l.Z,{attrs:{"fixed-header":"",headers:e.headers,items:e.list,"items-per-page":-1,"item-key":e.tableKey,"show-select":""},scopedSlots:e._u([{key:"item.role_master_name",fn:function({item:t,header:s}){return[a(v.Z,{staticClass:"caption",staticStyle:{width:"200px",margin:"0 auto"},attrs:{items:e.selectItems[s.api[1]],placeholder:"shiptype",dense:"",outlined:"","hide-details":"auto","item-text":s.textKey,"item-value":s.valueKey},model:{value:t[e.selectKeys[s.api[1]].modelKey],callback:function(a){e.$set(t,e.selectKeys[s.api[1]].modelKey,a)},expression:"item[selectKeys[header.api[1]].modelKey]"}})]}}],null,!0),model:{value:e.selectedList,callback:function(a){e.selectedList=a},expression:"selectedList"}})],1),a(m.h7,[a(y.Z),a(s.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),a(s.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1)},f=[],h=(t(7658),{name:"DialogCreateItem",props:["payload"],setup(e){let a=null,t=null;const s=(0,r.iH)(""),l=(0,r.qj)({}),o=(0,r.qj)({}),i=(0,r.iH)([]),n=(0,r.iH)(""),c=(0,r.iH)([]),u=(0,r.iH)([]),m=(0,r.iH)(!1),p=()=>{m.value=!1,(0,r.Y3)((()=>{i.value=[]}))},v=()=>{const{secoundHeaders:e,parentItem:l}=a,o=i.value.reduce(((a,l)=>{const o={};if(t.has(l[s.value])){o.saveType="update";const a=t.get(l[s.value]);e.map((e=>{!0===e.useUpdateItem&&(o[e.modelKey||e.value]=l[e.modelKey||e.value]||a[e.modelKey||e.value]||null)}))}else o.saveType="new",e.map((e=>{!0===e.useUpdateItem&&(o[e.modelKey||e.value]=l[e.modelKey||e.value]||null)}));return a.push(o),a}),[]),n={...l,list:o},[c,r]=a.api;(0,d.postRequest)([c,r],n,(e=>{a.setList(e)})),p()};return(0,r.YP)((()=>e.payload),(e=>{a=e,s.value=e.secoundHeaders[0].value;const r=[];e.list.map((a=>{e.targetListMap.has(a[s.value])&&r.push(a)})),i.value=r;const p=[],v=e.headers.filter((a=>{if(Object.prototype.hasOwnProperty.call(a,"type")){if("select"===a.type){const[t,i]=a.api;p.push(new Promise((t=>{(0,d.getRequest)(a.api,null,(n=>{const c=n[0][a.modelKey];e.list.map((t=>{e.targetListMap.has(t[s.value])?t[a.modelKey]=e.targetListMap.get(t[s.value])[a.modelKey]:-1===t[a.modelKey]&&(t[a.modelKey]=c)})),l[i]={textKey:a.textKey,valueKey:a.valueKey,modelKey:a.modelKey},o[i]=n,t(!0)}))})))}return!0}return!1}));Promise.all(p).then((()=>{n.value=e.title,c.value=v,u.value=e.list,t=new Map(a.targetList.map((e=>[e[s.value],e]))),m.value=!0}))})),{selectKeys:l,selectItems:o,tableKey:s,selectedList:i,title:n,headers:c,list:u,dialog:m,close:p,save:v}}}),g=h,k=t(1001),w=(0,k.Z)(g,b,f,!1,null,null,null),_=w.exports,T={name:"SelectComponent",components:{SelectDialog:_},props:{obj:Object},setup(e){const{masterName:a,masterApi:t,masterHeaders:s,mappingApi:l,updateApi:o,secoundName:i,secoundApi:n,secoundHeaders:c}=e.obj;s.splice(1,0,{text:"No",value:"no",align:"center"}),c.splice(1,0,{text:"No",value:"no",align:"center"});const u=(0,r.iH)(null),m=(0,r.iH)([]),p=(0,r.iH)([]),v=(0,r.iH)(""),y=(0,r.iH)(""),b={},f=(0,r.iH)(s[0].value),h=(0,r.iH)(s[0].value),g=(0,r.iH)(c[0].value);s.map((e=>{!0===e.useUpdateItem&&(b[e.value]=e),!0===e.useParentKey&&(f.value=e.value)}));let k=new Map;const w=e=>{const[a,t]=n;(0,d.getRequest)([a,t+"s"],{parent_key:e},(e=>{p.value=e||[],k=new Map(p.value.map((e=>[e[c[0].value],e])))}))},[_,T]=t;(0,d.getRequest)([_,T+"s"],null,(e=>{m.value=e||[]}));const x=(e,a)=>{u.value=e,w(e[f.value]),a.select(!0)},C=(0,r.iH)(null),H=(e,a)=>{const t={};for(const l in b)b[l].asKey?t[b[l].asKey]=u.value[l]:t[l]=u.value[l];const[s,i]=l;(0,d.getRequest)([s,i],null,(s=>{C.value={title:e,headers:a,list:s,targetList:p,targetListMap:k,api:o,parentItem:t,secoundHeaders:c,setList:e=>{p.value=e,k=new Map(p.value.map((e=>[e[c[0].value],e])))}}}))};return{refItem:u,masterTableKey:h,secoundTableKey:g,masterName:a,masterApi:t,masterHeaders:s,masterTableList:m,secoundName:i,secoundApi:n,secoundHeaders:c,secoundTableList:p,masterTableSearch:v,secoundTableSearch:y,selectTableItem:x,selectItem:H,selectPayload:C}}},x=T,C=(0,k.Z)(x,n,c,!1,null,null,null),H=C.exports},8868:function(e,a,t){t.d(a,{Z:function(){return g}});var s=t(4562),l=t(5039),o=t(4324),i=t(3424),n=t(7808),c=function(){var e=this,a=e._self._c;return a("div",{staticClass:"component"},[a("div",{staticClass:"box"},[a("CreateDialog",{attrs:{payload:e.createPayload}}),a("DeleteDialog",{attrs:{payload:e.deletePayload}}),a("UpdateDialog",{attrs:{payload:e.updatePayload}}),a("div",{staticClass:"col"},[a("div",{staticClass:"box rowBox"},[a("div",{staticClass:"hyTitle"},[e._v(e._s(e.masterName))]),void 0!==e.categoryOption?a(i.Z,{staticStyle:{width:"250px"},attrs:{items:e.categories,"item-text":a=>a[e.categoryOption.textKey],"item-value":a=>a[e.categoryOption.valueKey],"menu-props":"auto","hide-details":"","prepend-icon":"mdi-ferry","single-line":""},on:{change:e.categoryChange},model:{value:e.category,callback:function(a){e.category=a},expression:"category"}}):e._e(),a(s.Z,{attrs:{color:"primary",dark:""},on:{click:function(a){return e.createItem(e.masterName,e.masterApi,e.masterTableList,e.masterHeaders)}}},[e._v(" New Item ")]),a("div",{staticClass:"spacer"}),a(n.Z,{attrs:{"append-icon":"mdi-magnify",label:"검색","single-line":"","hide-details":""},model:{value:e.masterTableSearch,callback:function(a){e.masterTableSearch=a},expression:"masterTableSearch"}}),e.formDownloadApi?a(s.Z,{attrs:{color:"black",dark:""},on:{click:function(a){return e.download(e.formDownloadApi)}}},[e._v(" form Download ")]):e._e(),e.csvUploadloadApi?a(s.Z,{attrs:{color:"black",dark:""},on:{click:function(a){return e.upload(e.csvUploadloadApi)}}},[e._v(" csv Upload ")]):e._e(),e.csvDownloadApi?a(s.Z,{attrs:{color:"black",dark:""},on:{click:function(a){return e.download(e.csvDownloadApi)}}},[e._v(" csv Download ")]):e._e()],1),a("div",{staticClass:"box"},[a(l.Z,{attrs:{"fixed-header":"","single-select":!0,search:e.masterTableSearch,headers:e.masterHeaders,items:e.masterTableList,"items-per-page":-1,"item-key":e.tableKey},scopedSlots:e._u([{key:"item.no",fn:function({index:a}){return[e._v(" "+e._s(a+1)+" ")]}},{key:"item.actions",fn:function({item:t}){return[a(o.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.updateItem(e.masterName,e.masterApi,e.masterTableList,e.masterHeaders,t)}}},[e._v(" mdi-pencil ")]),a(o.Z,{attrs:{small:""},on:{click:function(a){return e.deleteItem(e.masterApi,e.masterTableList,t)}}},[e._v(" mdi-delete ")])]}}],null,!0)})],1)])],1)])},r=[],d=t(144),u=t(5266),m=t(9245),p=t(9659),v=t(209),y={name:"SelectComponent",components:{CreateDialog:p.Z,DeleteDialog:m.Z,UpdateDialog:v.Z},props:{obj:Object},setup(e){const{csvUploadloadApi:a,csvDownloadApi:t,formDownloadApi:s,categoryOption:l,masterName:o,masterApi:i,masterHeaders:n}=e.obj,c=(0,d.iH)(""),r=(0,d.iH)(null),m=(0,d.iH)(n[0].value);n.splice(1,0,{text:"No",value:"no",align:"center"});const p=(0,d.iH)([]),v=(0,d.iH)(""),y=()=>{const[e,a]=i;""===c.value?(0,u.getRequest)([e,a+"s"],null,(e=>{p.value=e||[]})):(0,u.getRequest)([e,a+"s"],{filterKey:c.value},(e=>{p.value=e||[]}))};if(l){const[e,a]=l.api;(0,u.getRequest)([e,a],null,(e=>{c.value=e[0][l.valueKey],r.value=e,y()}))}else y();const b=e=>{const a=document.createElement("input");a.addEventListener("change",(t=>{(0,u.fileUploadRequest)(e,a.files[0],(()=>{y(),alert("파일 업로드가 완료 되었습니다.")}))})),a.type="file",a.click()},f=e=>{(0,u.fileDownloadRequest)(e,{parent_key:c.value},((e,a)=>{const t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=e,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t)}))},h=e=>{c.value=e,y()},g=(0,d.iH)(null),k=(0,d.iH)(null),w=(0,d.iH)(null),_=(e,a,t,s)=>{const o={};l&&(o[l.modelKey]=c.value);const i={saveType:"new"};i[m.value]=null,g.value={title:e,api:a,list:t,fields:s,parentItem:i,filter:o}},T=(e,a,t,s,o)=>{const i={};l&&(i[l.modelKey]=c.value);const n={saveType:"update"};n[m.value]=o[m.value],k.value={title:e,api:a,list:t,fields:s,item:o,parentItem:n,filter:i}},x=(e,a,t)=>{w.value={list:a,item:t,api:e}};return{download:f,upload:b,csvUploadloadApi:a,csvDownloadApi:t,formDownloadApi:s,tableKey:m,categoryChange:h,categoryOption:l,category:c,categories:r,masterName:o,masterApi:i,masterHeaders:n,masterTableList:p,masterTableSearch:v,createItem:_,updateItem:T,deleteItem:x,createPayload:g,updatePayload:k,deletePayload:w}}},b=y,f=t(1001),h=(0,f.Z)(b,c,r,!1,null,null,null),g=h.exports},5824:function(e,a,t){t.d(a,{Z:function(){return g}});var s=t(4562),l=t(5039),o=t(4324),i=t(3424),n=t(7808),c=function(){var e=this,a=e._self._c;return a("div",{staticClass:"component"},[a("div",{staticClass:"box"},[a("CreateDialog",{attrs:{payload:e.createPayload}}),a("DeleteDialog",{attrs:{payload:e.deletePayload}}),a("UpdateDialog",{attrs:{payload:e.updatePayload}}),a("div",{staticClass:"col"},[a("div",{staticClass:"box rowBox"},[a("div",{staticClass:"hyTitle"},[e._v(e._s(e.masterName))]),void 0!==e.categoryOption?a(i.Z,{staticStyle:{width:"200px"},attrs:{items:e.categories,"item-text":a=>a[e.categoryOption.textKey],"item-value":a=>a[e.categoryOption.valueKey],"menu-props":"auto","hide-details":"","prepend-icon":"mdi-ferry","single-line":""},on:{change:e.categoryChange},model:{value:e.category,callback:function(a){e.category=a},expression:"category"}}):e._e(),!1!==e.masterNewItem?a(s.Z,{attrs:{color:"primary",dark:""},on:{click:function(a){return e.createItem("master",e.masterName,e.masterTableKey,e.masterApi,e.masterTableList,e.masterHeaders)}}},[e._v(" New Item ")]):e._e(),a("div",{staticClass:"spacer"}),a(n.Z,{attrs:{"append-icon":"mdi-magnify",label:"검색","single-line":"","hide-details":""},model:{value:e.masterTableSearch,callback:function(a){e.masterTableSearch=a},expression:"masterTableSearch"}}),e.formDownloadApi?a(s.Z,{attrs:{color:"black",dark:""},on:{click:function(a){return e.download(e.formDownloadApi)}}},[e._v(" form Download ")]):e._e(),e.csvDownloadApi?a(s.Z,{attrs:{color:"black",dark:""},on:{click:function(a){return e.download(e.csvDownloadApi)}}},[e._v(" csv Download ")]):e._e()],1),a("div",{staticClass:"box"},[a(l.Z,{staticClass:"selectTable",attrs:{"fixed-header":"","single-select":!0,search:e.masterTableSearch,headers:e.masterHeaders,items:e.masterTableList,"items-per-page":-1,"item-key":e.masterTableKey},on:{"click:row":e.selectTableItem},scopedSlots:e._u([{key:"item.no",fn:function({index:a}){return[e._v(" "+e._s(a+1)+" ")]}},{key:"item.actions",fn:function({item:t}){return[a(o.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.updateItem("master",e.masterName,e.masterTableKey,e.masterApi,e.masterTableList,e.masterHeaders,t)}}},[e._v(" mdi-pencil ")]),a(o.Z,{attrs:{small:""},on:{click:function(a){return e.deleteItem(e.masterApi,e.masterTableList,t)}}},[e._v(" mdi-delete ")])]}},{key:"item.icon",fn:function({}){return[a(o.Z,{staticClass:"mr-2",attrs:{small:""}},[e._v(" mdi-arrow-right-bold ")])]}}],null,!0)})],1)]),null!==e.refItem?a("div",{staticClass:"col",staticStyle:{"min-width":"55%"}},[a("div",{staticClass:"box rowBox"},[a("div",{staticClass:"hyTitle"},[e._v(e._s(e.secoundName))]),a(s.Z,{attrs:{color:"primary",dark:""},on:{click:function(a){return e.createItem("secound",e.secoundName,e.secoundTableKey,e.secoundApi,e.secoundTableList,e.secoundHeaders)}}},[e._v(" New Item ")]),a("div",{staticClass:"spacer"}),a(n.Z,{attrs:{"append-icon":"mdi-magnify",label:"검색","single-line":"","hide-details":""},model:{value:e.secoundTableSearch,callback:function(a){e.secoundTableSearch=a},expression:"secoundTableSearch"}}),e.secoundFormDownloadApi?a(s.Z,{attrs:{color:"black",dark:""},on:{click:function(a){return e.secoundDownload(e.secoundFormDownloadApi)}}},[e._v(" form Download ")]):e._e(),e.secoundCsvDownloadApi?a(s.Z,{attrs:{color:"black",dark:""},on:{click:function(a){return e.secoundDownload(e.secoundCsvDownloadApi)}}},[e._v(" csv Download ")]):e._e()],1),a("div",{staticClass:"box"},[a(l.Z,{attrs:{"fixed-header":"",search:e.secoundTableSearch,headers:e.secoundHeaders,items:e.secoundTableList,"items-per-page":-1,"item-key":e.secoundTableKey},scopedSlots:e._u([{key:"item.no",fn:function({index:a}){return[e._v(" "+e._s(a+1)+" ")]}},{key:"item.actions",fn:function({item:t}){return[a(o.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.updateItem("secound",e.secoundName,e.secoundTableKey,e.secoundApi,e.secoundTableList,e.secoundHeaders,t)}}},[e._v(" mdi-pencil ")]),a(o.Z,{attrs:{small:""},on:{click:function(a){return e.deleteItem(e.secoundApi,e.secoundTableList,t)}}},[e._v(" mdi-delete ")])]}}],null,!0)})],1)]):e._e()],1)])},r=[],d=t(144),u=t(5266),m=t(9245),p=t(9659),v=t(209),y={name:"SelectComponent",components:{CreateDialog:p.Z,DeleteDialog:m.Z,UpdateDialog:v.Z},props:{obj:Object},setup(e){const{formDownloadApi:a,csvDownloadApi:t,secoundFormDownloadApi:s,secoundCsvDownloadApi:l,categoryOption:o,masterNewItem:i,masterName:n,masterApi:c,masterHeaders:r,secoundName:m,secoundApi:p,secoundHeaders:v}=e.obj,y=(0,d.iH)(null),b=(0,d.iH)(""),f=(0,d.iH)(null),h=e=>{(0,u.fileDownloadRequest)(e,{parent_key:b.value},((e,a)=>{const t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=e,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t)}))},g=e=>{(0,u.fileDownloadRequest)(e,{parent_key:y.value.ship_idx},((e,a)=>{const t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=e,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t)}))};r.splice(1,0,{text:"No",value:"no",align:"center"}),v.splice(1,0,{text:"No",value:"no",align:"center"});const k=(0,d.iH)([]),w=(0,d.iH)([]),_=(0,d.iH)(""),T=(0,d.iH)(""),x={},C=(0,d.iH)(r[0].value),H=(0,d.iH)(r[0].value),K=(0,d.iH)(v[0].value);r.map((e=>{!0===e.useUpdateItem&&(x[e.value]=e),!0===e.useParentKey&&(C.value=e.value)}));const D=e=>{const[a,t]=p;(0,u.getRequest)([a,t+"s"],{parent_key:e},(e=>{w.value=e||[]}))},Z=e=>{b.value=e,A()},A=()=>{const[e,a]=c;""===b.value?(0,u.getRequest)([e,a+"s"],null,(e=>{k.value=e||[]})):(0,u.getRequest)([e,a+"s"],{filterKey:b.value},(e=>{k.value=e||[]}))};if(o){const[e,a]=o.api;(0,u.getRequest)([e,a],null,(e=>{b.value=e[0][o.valueKey],f.value=e,A()}))}else A();const I=(e,a)=>{y.value=e,D(e[C.value]),a.select(!0)},L=(0,d.iH)(null),S=(0,d.iH)(null),N=(0,d.iH)(null),R=(e,a,t,s,l,o)=>{const i={};if("secound"===e)for(const n in x)x[n].asKey?i[x[n].asKey]=y.value[n]:i[n]=y.value[n];i[t]=null,i.saveType="new",L.value={title:a,api:s,list:l,fields:o,parentItem:i}},U=(e,a,t,s,l,o,i)=>{const n={};if("secound"===e)for(const c in x)x[c].asKey?n[x[c].asKey]=y.value[c]:n[c]=y.value[c];n[t]=i[t],n.saveType="update",S.value={title:a,api:s,list:l,fields:o,item:i,parentItem:n}},O=(e,a,t)=>{N.value={list:a,item:t,api:e}};return{download:h,secoundDownload:g,formDownloadApi:a,csvDownloadApi:t,secoundFormDownloadApi:s,secoundCsvDownloadApi:l,refItem:y,masterTableKey:H,secoundTableKey:K,categoryChange:Z,categoryOption:o,category:b,categories:f,masterNewItem:i,masterName:n,masterApi:c,masterHeaders:r,masterTableList:k,secoundName:m,secoundApi:p,secoundHeaders:v,secoundTableList:w,masterTableSearch:_,secoundTableSearch:T,selectTableItem:I,createItem:R,updateItem:U,deleteItem:O,createPayload:L,updatePayload:S,deletePayload:N}}},b=y,f=t(1001),h=(0,f.Z)(b,c,r,!1,null,null,null),g=h.exports}}]);
//# sourceMappingURL=66.5d11d4d8.js.map